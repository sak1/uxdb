# UXDB实例

## 搭建多主机测试环境--VMware虚拟机克隆

数据库主备测试环境搭建等常需要用到多个虚拟机环境时，通过克隆可快速地创建多个虚拟机，演示一下：

### 准备

已安装好虚拟机软件（本例为VMware  Workstation 15 Pro）和虚拟机（本例为CentOS7.4）

### 克隆

1. 在VMware  Workstation 15 Pro上方==菜单栏==处依次点击==虚拟机==->==管理==->==克隆== ，按提示操作： 点下一步  
2. 本篇选择了克隆虚拟机当前的状态，如果你有之前的快照文件，可以按个人喜好来选择克隆快照链接克隆是对原始虚拟机的引用，所需的储存磁盘空间较少。但是，必须能够访问原始虚拟机才能行。
3.  完整克隆是原始虚拟机当前状态的完整副本。副本虚拟机完全独立，只是需要较多的储存磁盘空间。
4. 选择创建完整克隆，虚拟机名称自拟，要与被克隆的虚拟机名字有区别
5. 等待克隆
6. 克隆完成

### 改配置

为了让克隆出来的虚拟机变成一个独立的新虚拟机，需要更改其主机名和IP地址

#### 1 变更主机名

```shell
vi /etc/hostname   #改本机的主机名local1，如:local2
```

#### 2 变更IP地址

```
vi /etc/sysconfig/network-scripts/ifcfg-ens33    #改本机的IP地址最后的131更改为其他数，如132
```

#### 3 禁用NetworkManager

NetworkManager是用于为系统提供检测和配置以自动连接到网络的程序。禁用它以保障网络启动成功。

```shell
systemctl stop NetworkManager
systemctl disable NetworkManager
```

#### 4  重启主机与网络

```
reboot
service network restart
```

被克隆的虚拟机IP地址为192.168.138.131 主机名为uxdb1
克隆后的虚拟机IP地址为192.168.138.132 主机名为uxdb2

> 注：被克隆的虚拟机和克隆后的虚拟机的etc/hosts 都需要添加

#### 5 测试

两台虚拟机都开启后，使用ping命令即可查看网络是否连通

```
#在uxdb1主机上：
ping 192.168.138.132

#在uxdb2主机上：
ping 192.168.138.131
```

